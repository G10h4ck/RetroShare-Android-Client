<!-- 20130707_1 Each time you edit this file increment the number at beginning of this line so the files get updated too on android update -->
<!-- javaInterface stored in ChatActivity.JAVASCRIPT_NAME is the name of the instance of the class JavaScriptInterface -->
<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	<script type="text/javascript">//<![CDATA[
		function appendText(extraStr)
		{
			console.log("appendText(extraStr)");
			document.getElementsByTagName('body')[0].innerHTML = document.getElementsByTagName('body')[0].innerHTML + extraStr;
		}

		function removeLastBr()
		{
			console.log("removeLastBr()");
			allBr = document.getElementsByTagName('br');
			lastBrIndex = allBr.length - 1 ;
			lastBr = allBr.item(lastBrIndex);
			lastBr.parentNode.removeChild(lastBr);
		}

		function appendBr()
		{
			appendText("<br/>")
		}

		function appendMessage(nick, msg)
		{
			console.log("appendMessage(nick, msg)");
			line = "<span style=\"color:dodgerblue;\">" + nick + ":</span> " + msg + "<br/>";
			appendText(line)
		}

		function updateMessages()
		{
			removeLastBr();
			try { while ( javaInterface.goNextMessage() ) appendMessage( javaInterface.getLastMessageNick(), javaInterface.getLastMessageBody() ); }
			catch(e) { appendMessage("Debug", "javaInterface sbrocca" ) }
			appendBr();
		}

    //]]>
    </script>
</head>
<body>
	<!-- <a href="javascript:updateMessages();">Call updateMessages() v3</a><br/> -->
	<br/>
</body>
</html>